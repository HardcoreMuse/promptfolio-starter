(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[118],{4075:(e,a,l)=>{"use strict";l.d(a,{N:()=>s});let s=(0,l(5040).UU)("https://agmcmcbwpoedhrqomcgc.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImFnbWNtY2J3cG9lZGhycW9tY2djIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTcwMDAwMzYsImV4cCI6MjA3MjU3NjAzNn0.pC9etCz1BlFWLXk15KRk9oyqoxBT-7H0bKIMIR9aiH0",{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0}})},5242:(e,a,l)=>{"use strict";l.r(a),l.d(a,{default:()=>t});var s=l(5155),n=l(2115),i=l(4075);function t(){var e,a,l,t;let[r,u]=(0,n.useState)(!0),[c,o]=(0,n.useState)(null),[d,m]=(0,n.useState)(null),[p,x]=(0,n.useState)(null),[h,N]=(0,n.useState)(null);async function b(e){if(e.preventDefault(),!d||!p)return;N(null);let{error:a}=await i.N.from("profiles").upsert({id:d,username:p.username,display_name:p.display_name,avatar_url:p.avatar_url,bio:p.bio},{onConflict:"id"});N(a?"Error: ".concat(a.message):"Saved."),!a&&p.username&&(window.location.href="/u/".concat(p.username))}return((0,n.useEffect)(()=>{(async()=>{var e,a;let{data:{session:l}}=await i.N.auth.getSession(),s=null==l?void 0:l.user;if(o(null!=(e=null==s?void 0:s.email)?e:null),m(null!=(a=null==s?void 0:s.id)?a:null),!s)return u(!1);let{data:n,error:t}=await i.N.from("profiles").select("*").eq("id",s.id).single();t&&"PGRST116"!==t.code&&N(t.message),x(null!=n?n:{id:s.id,username:null,display_name:null,avatar_url:null,bio:null}),u(!1)})()},[]),r)?(0,s.jsx)("main",{className:"p-6",children:"Loading…"}):d?(0,s.jsxs)("main",{className:"p-6 max-w-xl mx-auto space-y-4",children:[(0,s.jsx)("h1",{className:"text-2xl font-semibold",children:"Your Profile"}),(0,s.jsxs)("p",{className:"text-sm text-gray-500",children:["Signed in as ",c]}),(0,s.jsxs)("form",{onSubmit:b,className:"space-y-3",children:[(0,s.jsxs)("label",{className:"block",children:[(0,s.jsx)("span",{className:"text-sm",children:"Username"}),(0,s.jsx)("input",{className:"w-full border rounded px-3 py-2",value:null!=(e=null==p?void 0:p.username)?e:"",onChange:e=>x(a=>a?{...a,username:e.target.value}:a)})]}),(0,s.jsxs)("label",{className:"block",children:[(0,s.jsx)("span",{className:"text-sm",children:"Display name"}),(0,s.jsx)("input",{className:"w-full border rounded px-3 py-2",value:null!=(a=null==p?void 0:p.display_name)?a:"",onChange:e=>x(a=>a?{...a,display_name:e.target.value}:a)})]}),(0,s.jsxs)("label",{className:"block",children:[(0,s.jsx)("span",{className:"text-sm",children:"Avatar URL"}),(0,s.jsx)("input",{className:"w-full border rounded px-3 py-2",value:null!=(l=null==p?void 0:p.avatar_url)?l:"",onChange:e=>x(a=>a?{...a,avatar_url:e.target.value}:a)})]}),(0,s.jsxs)("label",{className:"block",children:[(0,s.jsx)("span",{className:"text-sm",children:"Bio"}),(0,s.jsx)("textarea",{className:"w-full border rounded px-3 py-2",rows:4,value:null!=(t=null==p?void 0:p.bio)?t:"",onChange:e=>x(a=>a?{...a,bio:e.target.value}:a)})]}),(0,s.jsx)("button",{className:"rounded bg-black text-white px-4 py-2",children:"Save"}),h&&(0,s.jsx)("p",{className:"text-sm",children:h})]})]}):(0,s.jsxs)("main",{className:"p-6",children:[(0,s.jsx)("p",{className:"mb-3",children:"You’re not signed in."}),(0,s.jsx)("a",{className:"underline",href:"/auth/signin",children:"Go to Sign in"})]})}},9779:(e,a,l)=>{Promise.resolve().then(l.bind(l,5242))}},e=>{e.O(0,[40,441,255,358],()=>e(e.s=9779)),_N_E=e.O()}]);